@using Microsoft.AspNetCore.Components
@using NexusEMS.Shared.Enums
@using NexusEMS.Web.Services
@inject NavigationManager Navigation
@inject AuthService AuthService

@code {
    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            var role = AuthService.GetUserRole();
            try
            {
                if (role == UserRole.Admin)
                    Navigation.NavigateTo("/admin/dashboard", forceLoad: false);
                else if (role == UserRole.DepartmentChief)
                    Navigation.NavigateTo("/chief/dashboard", forceLoad: false);
                else
                    Navigation.NavigateTo("/login", forceLoad: false);
            }
            catch
            {
            }
        }
    }
}

