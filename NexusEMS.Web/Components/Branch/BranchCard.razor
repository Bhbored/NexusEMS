@using NexusEMS.Shared.Models

<div class="card branch-card h-100">
    <div class="card-body">
        <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
                <h5 class="card-title mb-1 fw-bold">@Branch.Name</h5>
                @if (!string.IsNullOrEmpty(Branch.Code))
                {
                    <span class="badge branch-code-badge">@Branch.Code</span>
                }
            </div>
            <div class="branch-icon">
                <i class="bi bi-building"></i>
            </div>
        </div>

        @if (!string.IsNullOrEmpty(Branch.Location))
        {
            <div class="d-flex align-items-center mb-2 branch-info-item">
                <i class="bi bi-geo-alt me-2"></i>
                <span class="small">@Branch.Location</span>
            </div>
        }

        @if (!string.IsNullOrEmpty(Branch.ContactNumber))
        {
            <div class="d-flex align-items-center mb-2 branch-info-item">
                <i class="bi bi-telephone me-2"></i>
                <span class="small">@Branch.ContactNumber</span>
            </div>
        }

        @if (Branch.Budget.HasValue)
        {
            <div class="d-flex align-items-center mb-3 branch-info-item">
                <i class="bi bi-cash-coin me-2"></i>
                <span class="small fw-semibold">@Branch.Budget.Value.ToString("C")</span>
            </div>
        }

        <div class="d-flex justify-content-between align-items-center pt-3 branch-stats">
            <div class="text-center">
                <div class="fw-bold branch-stat-value">@DepartmentCount</div>
                <div class="small branch-stat-label">Departments</div>
            </div>
            <div class="text-center">
                <div class="fw-bold branch-stat-value">@EmployeeCount</div>
                <div class="small branch-stat-label">Employees</div>
            </div>
            <div class="text-center">
                <div class="fw-bold branch-stat-value">@UserCount</div>
                <div class="small branch-stat-label">Users</div>
            </div>
        </div>
    </div>

    <div class="card-footer branch-card-footer">
        <button class="btn btn-sm branch-action-btn" @onclick="() => OnViewDetails.InvokeAsync(Branch.Id)" title="View Details">
            <i class="bi bi-eye me-1"></i> View
        </button>
        <button class="btn btn-sm branch-action-btn" @onclick="() => OnEdit.InvokeAsync(Branch.Id)" title="Edit">
            <i class="bi bi-pencil me-1"></i> Edit
        </button>
    </div>
</div>

@code {
    [Parameter] public Branch Branch { get; set; } = new();
    [Parameter] public EventCallback<Guid> OnViewDetails { get; set; }
    [Parameter] public EventCallback<Guid> OnEdit { get; set; }
    [Parameter] public int DepartmentCount { get; set; }
    [Parameter] public int EmployeeCount { get; set; }
    [Parameter] public int UserCount { get; set; }
}
